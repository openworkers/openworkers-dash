@if (user$ | async; as user) {
  @if (menuActive$ | async; as menuActive) {
    <nav class="main-nav border-b">
      <div class="nav-content">
        <div class="flex gap-8 flex-1">
          <!-- Logo -->
          <div class="flex flex-col min-w-max uppercase justify-center text-4xl font-extrabold">
            <div class="flex gap-2 flex-1 p-4">
              <a routerLink="/" href="/">
                <svg class="h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 283.46 283.46">
                  <path
                    class="fill-black dark:fill-white"
                    d="m205.14,205.14l-95.11-95.12,31.71-31.71,63.41,63.41,63.38-63.39C245.26,31.89,197.22,0,141.73,0S38.21,31.89,14.94,78.34l95.09,95.1-31.7,31.7L.71,127.52c-.47,4.67-.71,9.41-.71,14.21,0,78.28,63.46,141.73,141.73,141.73s141.73-63.46,141.73-141.73c0-4.8-.24-9.54-.71-14.21l-77.62,77.62Z"
                  />
                </svg>
              </a>
            </div>
          </div>
          <!-- Menu -->
          <div class="flex gap-4 mb-[-1px]">
            <!-- Workers -->
            <a class="menu-item" routerLink="/workers" [ngClass]="{ active: menuActive === 'workers' }"> Workers </a>
            <!-- Environments -->
            <a class="menu-item" routerLink="/environments" [ngClass]="{ active: menuActive === 'environments' }">
              Environments
            </a>
            <!-- Databases -->
            <a class="menu-item" routerLink="/databases" [ngClass]="{ active: menuActive === 'databases' }">
              Databases
            </a>
          </div>
        </div>
        <div class="flex gap-4">
          <div class="menu-item">
            <app-theme-switch class="flex"></app-theme-switch>
          </div>
          <div>
            <a routerLink="/account" [ngClass]="{ active: menuActive === 'account' }">
              @if (user.avatarUrl) {
                <img class="rounded-full w-8 min-h-8" [src]="user.avatarUrl" [alt]="user.username" />
              } @else {
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
                  <path
                    d="M11.1 35.25q3.15-2.2 6.25-3.375Q20.45 30.7 24 30.7q3.55 0 6.675 1.175t6.275 3.375q2.2-2.7 3.125-5.45Q41 27.05 41 24q0-7.25-4.875-12.125T24 7q-7.25 0-12.125 4.875T7 24q0 3.05.95 5.8t3.15 5.45ZM24 25.5q-2.9 0-4.875-1.975T17.15 18.65q0-2.9 1.975-4.875T24 11.8q2.9 0 4.875 1.975t1.975 4.875q0 2.9-1.975 4.875T24 25.5ZM24 44q-4.1 0-7.75-1.575-3.65-1.575-6.375-4.3-2.725-2.725-4.3-6.375Q4 28.1 4 24q0-4.15 1.575-7.775t4.3-6.35q2.725-2.725 6.375-4.3Q19.9 4 24 4q4.15 0 7.775 1.575t6.35 4.3q2.725 2.725 4.3 6.35Q44 19.85 44 24q0 4.1-1.575 7.75-1.575 3.65-4.3 6.375-2.725 2.725-6.35 4.3Q28.15 44 24 44Zm0-3q2.75 0 5.375-.8t5.175-2.8q-2.55-1.8-5.2-2.75-2.65-.95-5.35-.95-2.7 0-5.35.95-2.65.95-5.2 2.75 2.55 2 5.175 2.8Q21.25 41 24 41Zm0-18.5q1.7 0 2.775-1.075t1.075-2.775q0-1.7-1.075-2.775T24 14.8q-1.7 0-2.775 1.075T20.15 18.65q0 1.7 1.075 2.775T24 22.5Zm0-3.85Zm0 18.7Z"
                  />
                </svg>
              }
            </a>
          </div>
        </div>
      </div>
    </nav>
  }
}

<main>
  <router-outlet></router-outlet>
</main>
